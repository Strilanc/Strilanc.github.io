---
layout: post
title: "Bell Test"
date: 2015-10-01 11:30:00 EST
categories: quantum
comments: true
---

{% assign loc = page.path | remove_first: '_posts/' | remove: '.md' %}

<style scoped>
    table {
        margin: 0 auto;
        border-spacing: 0;
    }

    table, td, tr {
        padding: 0;
    }

    textarea {
        width: 370px;
        resize: vertical;
        overflow-x: auto;
        white-space: pre;
    }

    .codeBlock {
        background-color:#EEE;
        padding: 4px;
    }

    .hued {
        filter: hue-rotate(90deg);
        -webkit-filter: hue-rotate(90deg);
    }

    .resultTable {
        background-color: #EEE;
        padding: 3px 3px 0 3px;
        margin-top: 10px;
        border-spacing: 3px;
    }
</style>

In this post: I try to explain the Bell inequalities, and you try to write a strategy that violates them.

# Required and Prohibited

Quantum mechanics is frustratingly hard to explain.
There are a lot of reasons for that, but a biggie is how quantum mechanics' complicated relationship with locality.
It both *requires* and *prohibits* faster-than-light transfer of information.

How can that be the case?
Well, the requirement and the prohibition differ slightly.
It's our intuitions that want to treat them as opposites.

Quantum systems can't be used to transfer information faster than light, *and* can't be emulated without transfering information faster than light (by classical computers).
Both of these statements are mathematical *fact*, known as [the no-communcation theorem](https://en.wikipedia.org/wiki/No-communication_theorem) and [Bell's theorem](https://en.wikipedia.org/wiki/Bell's_theorem) respectively.

Common sense screams that those theorems can't both be true.
Obviously they contradict each other!
And yet here we are, surrounded by a reality that apparently satisfies both.

In this post, I will give you intuition pumps and interactive examples to convince you of both facts.

# No Signalling

Why can't entangled quantum systems be used to transfer information instantaneously?
It all comes down to commutativity.

When you have an entangled quantum system, the operations on one side have to be expanded to apply to the whole system by using the tensor product.
But tensor-expanded matrix multiplications commute when they apply to different parts.

Alternatively, read my post on entangled systems acting like unitary matrices where I show that one side accumulates operations on the left while the other accumulates operations on the right.
These include measurements.

Don't believe me?
Try to do it.

WIDGET

# Yes Signalling

Now let's move to the other side of the coin: Bell's theorem.

The code idea in Bell's theorem is that there are coordination games that you can win more often if you bring an entangled quantum system with you.

If you only had classically entangled systems, like a shared random outcome, you couldn't do better.

There are many games that have this property (e.g. the Mermin-peres magic square game), but the smallest is the CHSH game.
The goal of this game is, basically, for Alice and Bob to pick booleans $a$ and $b$ such that $a \oplus b = x \otimes y$.
The caveat is that they are separated from each other, and Alice only learns $x$ while Bob only learns $y$.
They have to give disagreeing answers except in the case where both $x$ and $y$ are true.

Bell proved that no classical strategy for this game could win more than 75% of the time (if $x$ and $y$ were chosen randomly).

I'm not going to explain why that's the case.
Instead, I'm going to give you an interactive widget and you're going to try to create a strategy that consistently wins more than 75% of the time.

In the text areas below, you can write javascript that assigns a boolean value to the `move` variable, based on the boolean `refChoice` variable and any of the 16 shared random boolean values in the `sharedBits` array.

(Alternatively, just try to [cheat by escaping the sandbox](https://alexnisnevich.github.io/untrusted/). I tried to make that a *little* difficult, though.)

<!--
    Sandbox escape mechanisms that shouldn't work:
    - Code injection via mismatched braces. (JSON.stringify -> eval)
    - Assigning values to a global and reading them out on the other side. (Seperate web workers)
    - Re-assigning Math.random or other functions used by the surrounding glue code. (Their values are stashed into locals)

    Things that might work:
    - WebSockets
    - Cracking Math.random's seed
    - Browser-level exploits (Chrome does seem to crash if a bunch of web workers start...)
-->

<div style="width: 850px;">
    <table align="center" style="background-color: #EEE; padding: 2px;">
        <tr><td align="left">var sharedBits = [Math.random() &lt; 0.5, Math.random() &lt; 0.5, …]</td></tr>
    </table>

    <img src="/assets/{{ loc }}/bell_test_widget_split.png" style="margin: 0 auto; padding: 0; display: block;"/>

    <div class="codeBlock" style="margin-left: 4px; float:left;">
        <div>var refChoice = Math.random() &lt; 0.5;<br/>var move; //ALICE's move</div>
        <textarea id="srcTextArea1_a" rows="4"></textarea>
    </div>
    <div class="codeBlock" style="margin-right: 4px; float:right;">
        <div style="text-align: left;">var refChoice = Math.random() &lt; 0.5;<br/>var move; //BOB's move</div>
        <textarea id="srcTextArea2_a" rows="4"></textarea>
    </div>

    <table><tr style="vertical-align: top;">
        <td><img src="/assets/{{ loc }}/bell_test_widget_side_join.png"/></td>
        <td>
            <div style="text-align: center; max-width: 450px;">
                <label id="errorLabel_a" style="font: 16pt bold Helvetica; color: red">
                    ERROR: javascript disabled
                </label>
            </div>
            <table id="resultsTable_a" class="resultTable">
                <tr>
                    <td align="right">Estimated Win Rate:</td>
                    <td align="left"><label id="rateLabel_a" style="font-weight: bold;"></label></td>
                </tr>
                <tr>
                    <td align="right">Violated Bell Inequality:</td>
                    <td align="left"><label id="judgementLabel_a" style="font-weight: bold;"></label></td>
                </tr>
                <tr>
                    <td align="right">Measured Wins:</td>
                    <td align="left"><label id="countLabel_a"></label></td>
                </tr>
                <tr>
                    <td align="right">Outcome Breakdown:</td>
                    <td align="left"><canvas id="drawCanvas_a" width="281px" height="281px"></canvas></td>
                </tr>
            </table>
        </td>
        <td><img src="/assets/{{ loc }}/bell_test_widget_side_join.png" style="transform:scaleX(-1);"/></td>
    </tr></table>
</div>

The main thing to notice about classical strategies for the CHSH game is that a deterministic strategy corresponds to placing a rectangle over the outcomes so that there's on corner in each quadrant.
All such rectangles have either exactly 3 blues or exactly 3 reds, so deterministic strategies either do 75% or 25%.
A probabilistic classical strategy is, utltimately, just a linear combination of the rectangles.
But a linear combination of 25% and 75% with probability coefficients will just be some number between 25% and 75%.

So, how does the quantum strategy do better?

Explaining that would require explaining how to represent and operate on a quantum state.
The important thing to realize is that when each side rotates around the X axis the agreement between the outcomes will be like $\cos(\frac{\theta\_1 + theta\_2}{2})^2$.
cos(pi/8)^2 = 0.8535533905932737622004221810524245196424179688442370
Initially they offset by a combined -45 degrees, so they will agree cos(pi/8)^2 of the time.
But when one ref is true, they offset to +45 degrees. They still agree cos(pi/8)^2 of the time.
But one both refs are true, the offset to +135 degrees, which will make them disagree cos(pi/8)^2 of the time.
Overall score of cos(pi/8)^2.

(
Confusingly, turning around the Y axis subtracts the angles instead of adding them so you'd get $\cos(\frac{\theta\_1 - theta\_2}{2})^2$.
Physically, you could interpret this as the two parties facing each other and so some of the rotations are reflected, but I'm not sure that's justified.
)

Anyways, here's a quantum-strategy version of the CHSH game.
Once again you can enter a code snippet into each side, where you assign `move`.
This time there's no `sharedBits`, but you still have `refChoice` and you now have an entangled qubit that you can `turn(axis, degrees)` and `measure()`.
(The avallable axises are `X`, `Y`, and `Z. Also there's `H`, which is just the diagonal along X+Z.)

<!--
    It's a lot easier to escape the sandbox here because both snippets are run in the same web worker.
-->

<div style="width: 850px;">
    <table align="center" style="background-color: #EEE; padding: 2px;">
        <tr><td align="left">sharedQubit = |00〉+ |11〉</td></tr>
    </table>

    <img src="/assets/{{ loc }}/bell_test_widget_split.png" class="hued" style="margin: 0 auto; padding: 0; display: block;"/>

    <div class="codeBlock" style="margin-left: 4px; float:left;">
        <div>var refChoice = Math.random() &lt; 0.5;<br/>var move; //ALICE's move</div>
        <textarea id="srcTextArea1_b" rows="4"></textarea>
    </div>
    <div class="codeBlock" style="margin-right: 4px; float:right;">
        <div style="text-align: left;">var refChoice = Math.random() &lt; 0.5;<br/>var move; //BOB's move</div>
        <textarea id="srcTextArea2_b" rows="4"></textarea>
    </div>

    <table><tr style="vertical-align: top;">
        <td><img src="/assets/{{ loc }}/bell_test_widget_side_join.png" class="hued"/></td>
        <td>
            <div style="text-align: center; max-width: 450px;">
                <label id="errorLabel_b" style="font: 16pt bold Helvetica; color: red">
                    ERROR: javascript disabled
                </label>
            </div>
            <table id="resultsTable_b" class="resultTable">
                <tr>
                    <td align="right">Estimated Win Rate:</td>
                    <td align="left"><label id="rateLabel_b" style="font-weight: bold;"></label></td>
                </tr>
                <tr>
                    <td align="right">Violated Bell Inequality:</td>
                    <td align="left"><label id="judgementLabel_b" style="font-weight: bold;"></label></td>
                </tr>
                <tr>
                    <td align="right">Measured Wins:</td>
                    <td align="left"><label id="countLabel_b"></label></td>
                </tr>
                <tr>
                    <td align="right">Outcome Breakdown:</td>
                    <td align="left"><canvas id="drawCanvas_b" width="281px" height="281px"></canvas></td>
                </tr>
            </table>
        </td>
        <td><img src="/assets/{{ loc }}/bell_test_widget_side_join.png" class="hued" style="transform:scaleX(-1);"/></td>
    </tr></table>
</div>

As you can see, quantum strategies are able to beat 75%.
They are somehow superior to classical strategies.

# Intepretation

So... what does this all mean?
How can quantum systems both use and ban faster than light signalling?

First of all, it's important to remember than quantum mechanics only requires FTL signalling *if you try to emulate it classically* (and you emulate separation in the simulation with *actual* separation).
But reality is *not* classical; the argument that quantum mechanics requires FTL signalling is not valid because one of our premises doesn't hold.

As for whether or not quantum mechanics is *really* non-local or not "behind the scenes"... how could I possibly answer that question when local interpretations (many-worlds) give the same experimental predictions as non-local interpretations (e.g. pilot-wave, collapse)?
Nothing you ever do can depend on the answer to that question, unless quantum mechanics is wrong, so you'll just have to come to terms with reality not caring about being intuitive.

<script src="/assets/{{ loc }}/bell_test_widget.js"></script>
