<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Wait, What?: Genetic Algorithms for Digital Quantum Simulations</title>
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <meta name="viewport" content="width=device-width">

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- RSS autodiscovery -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

    <!-- Analytics -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-48771413-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body>
    <div class="header">
      <a href="/"><img src="/assets/banner.png" alt="Algorithmic Assertions - Craig Gidney's Computer Science Blog" id="site_banner"/></a>
    </div>
    <div class="site">

      <h1 class="post_title">Wait, What?: Genetic Algorithms for Digital Quantum Simulations</h1>
<p class="meta">05 Jul 2016</p>

    <!-- MathJax latest -->
    <script async type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$']],
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        },
        TeX: {
          Macros: {
            ket: ["\\left|{#1}\\right\\rangle", 1],
            bra: ["\\left\\langle{#1}\\right|", 1],
            parens: ["\\left({#1}\\right)", 1],
            bracket: ["\\left[{#1}\\right]", 1],
            brace: ["\\left\\{ {#1} \\right\\}", 1],
            Sum: ["\\underset{#1}{\\overset{#2}{\\Sigma}}", 2],
            bimat: ["\\begin{bmatrix} {#1} & {#2} \\\\ {#3} & {#4} \\end{bmatrix}", 4]
          }
        }
      });
    </script>
    <noscript>
      <font color=red>
        MathJax was blocked.
        Formulas like <strong>$\frac{a}{b}$</strong> won't render into <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAYCAIAAACjjJBEAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFnSURBVDhPY/hPCCBU/P1wamJqZFpBTnJcqLl9142fUHGYip93Znopuc55+Pv/zyv16kJ+W99DJaAq/r3bGiLA67cFJPxuo5eI8bSHf8ASQABR8e1krhSr+ZwnQOGvx9LlFPNPvnv37vs/sBxExc/rrToy8Ye+/P/7ekeKFK/H2guLsvuvQlwCdcefF1sKPX3ic8qaJkzKsTcPSKzY8PQ3RArmUtyAWioYcAOoCvyAyiq+nusIVGdl0O6+/QsqAgYoZnw5nCSlkHfqG5QLAcgqflyuVZeI3PMJyoUCJBV/Hk43YRFySSvIDHXyrNr75i9EGKHi35t1HvxKxUc+/vv/cYe/qNGEu5CIQaj4cjBBSrn03HewYUZsStWXfoDF4Sp+351gKB688yMwOb5c4cwlmngA6h64ir9P59lr5Jz89v/nrQnWsl4LH0MjH8mWvx9OdEUFJ6TEhGXPu/IFkr5AAKECO/j/HwCRTZMPA+AaqQAAAABJRU5ErkJggg==" />.
      </font>
      <br>
      Allow scripts from <strong>algorithmicassertions.com</strong> and <strong>mathjax.org</strong> to fix.
      <hr/>
    </noscript>

<div class="post">
<p>Last week, the paper <a href="https://arxiv.org/abs/1512.00674">&#39;Genetic Algorithms for Digital Quantum Simulations&#39; by U. Las Heras et al.</a> was published <a href="http://journals.aps.org/prl/abstract/10.1103/PhysRevLett.116.230504">in Physical Review Letters</a>.</p>

<p>I was reading through the pre-print, when I saw figure 4 and did a double-take:</p>

<blockquote>
<p><img style="max-width:100%; border: 1px solid gray;" src="/assets/2016-07-05-wait-what-genetic-resilient-cnot/original_diagram.png"/></p>
</blockquote>

<p><em>(Note: Yes, the same diagram is in the published paper)</em></p>

<p>Look at that diagram. Look at it some more. Understand what it&#39;s doing.</p>

<p>See anything strange?</p>

<p>The initial thing that caught my eye was the fact that T is supposed to be the target, but nothing ever toggles T.
Apparently the authors accidentally switched the wire labels.
An understandable mistake, easily fixed:</p>

<p><img style="max-width:100%;" src="/assets/2016-07-05-wait-what-genetic-resilient-cnot/fixed_diagram.png"/></p>

<p>The second odd thing is that there&#39;s no Hadamard gates.
Those are important if you want to detect phase errors.</p>

<p>But the really odd thing is the work bits.
I mean... what are they even doing?
They get toggled, but they never toggle <em>back</em>.
You could make this circuit <em>strictly simpler</em> by throwing away every single operation that touches a work bit:</p>

<p><img style="max-width:100%;" src="/assets/2016-07-05-wait-what-genetic-resilient-cnot/cutting_gates.png"/></p>

<p>This reduced circuit isn&#39;t <em>exactly</em> equivalent to the original when errors are in the mix, but generally speaking you shouldn&#39;t be able to simplify an error-corrected circuit by <em>only</em> deleting gates.</p>

<p>So what are the extra gates <em>for</em>?
Why would this seemingly-bloated circuit score highly on an error metric?</p>

<h1>Purpose</h1>

<p>After staring at this circuit for too long, trying to fathom what the heck it&#39;s supposed to be doing, I have a guess.</p>

<p>I think the authors used an error model based on gate fidelity, where each gate&#39;s effect is perturbed slightly.
This turns gates into a tradeoff.
Every time you apply one, you accumulate some error.
But, using error correcting schemes, if the error rate is low enough, it&#39;s possible to suppress problems faster than they appear.
That&#39;s what the authors were hoping to see their GA do.</p>

<p>But evolution <a href="http://lesswrong.com/lw/kw/the_tragedy_of_group_selectionism/">doesn&#39;t always find the solution you intended</a>.
Low fidelity gates are a costly tradeoff... if you apply them to wires <em>that matter</em>.
Another strategy, when you&#39;re forced to use a fixed number of terrible gates, is to do as much work as possible on useless wires that don&#39;t affect the result.
Use one gate to do the work you have to do, throw in a connecting gate to satisfy a rule about the work bits being affected by the bits that matter, add another connecting gate to uncompute the first, dump the rest of the awfulness onto bits that don&#39;t matter, and you&#39;ve found yourself a high scoring circuit!</p>

<p>(<em>Note: This &#39;useless work&#39; strategy is also good if errors are introduced at a constant rate per time step, but independent of the number of wires, so that more wires means fewer errors per wire.
The useless work bits would act as chaff, absorbing some of the errors.</em>)</p>

<p>I don&#39;t have access to the author&#39;s source code, so I can&#39;t say for certain that this is what happened.
The real reason is probably more complicated, and more subtle.
But, from the outside, this really does look like a &quot;do error-prone work on bits that don&#39;t matter instead of bits that do&quot; design.</p>

<h1>Judgement</h1>

<p>The weirdness of this circuit jumps out at you if you look at it for more than a minute.
Maybe I&#39;m overlooking something obvious, but the authors and the reviewers really should have noticed.
I&#39;m sure the authors verified that the circuit scored highly on their error metric...
but currently I think they should have thought some more about <em>why</em> it scored so highly.</p>

<p>Oh well.
At least this will make <a href="http://twistedoakstudios.com/blog/Post1080_my-bug-my-bad-1-fractal-spheres">another</a> <a href="http://www.michaeleisen.org/blog/?p=358">good</a> &quot;it did what I said, not what I wanted&quot; <a href="http://hforsten.com/evolutionary-algorithms-and-analog-electronic-circuits.html?PageSpeed=noscript">anecdote</a>.</p>

<p>(<em>Note: Also, why would you use a GA to search the space of 5-gate circuits?
It&#39;s small enough to brute force.</em>)</p>

</div>

<!-- IntenseDebate comments -->

  <script>
  var idcomments_acct = '7d0006bd6a016f9a2892cc2ecc64de01';
  var idcomments_post_id = '/post/1619';
  var idcomments_post_url = 'http://algorithmicassertions.com/post/1619';
  </script>
  <span id="IDCommentsPostTitle" style="display:none"></span>
  <script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>
  <noscript>
    <hr>
    <font color=red>
      Comments script blocked. Comments won't work.
    </font>
    <br/>
    Allow scripts from <strong>algorithmicassertions.com</strong> and <strong>intensedebate.com</strong> to fix.
  </noscript>




    </div>

    <table style="width: 100%;">
      <tr>
        <td align="left">
          <a href="/post/1618">&laquo; [Un]popular Qubits #4: Affecting Atoms by Looking at Emitted Light</a>
        </td>
        <td align="right">
          
        </td>
      </tr>
    </table>

    <div class="footer-container">
      <div class="site">
        <div class="footer">
          <div class="contact">
            by: Craig Gidney<br />
            more: <a href="/">All Posts</a>, <a href="/feed.xml">Posts Feed<img src="/assets/feed-icon.png" width="16px" alt="Posts Feed" title="Posts Feed" /></a><br/>
            meta: <a href="/about.html">About the Author/Blog</a><br/>
          </div>
          <div class="license">
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
              <img alt="Creative Commons License" style="border-width:0" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAYAAABjyArgAAAFOklEQVRo3u1aTU8bRxj2OVIs7lw4hhttlR5TpPQHkB+QiH9Q1FskqqCIVIpUCVmuoubQUKm3JrDG5sNfeA1rY3vX9noh5MpP4Ce81fOu32V2WfAHzhoTRhqx3pmdHZ595nk/ZmJEFI/FYnRfR1+J8Kf7Yye/TXvFXcqVslQ8KFDJKNFBtUxG3aAjs0r1Zo0arQZZbZOatkXNTtOttkWWbZLZanAf9K3UDX5WN0o8Vq6U47Hxjkw2TVt7KUrtaLS5vUEbmU9cP6U/0set/+5MVYC+ADev52j/sEjlik5G7ZDBarTqDGDbaVHnxCbnc4eOT4/p5Itbce18drgNfSzb4mfwLMYoV3UeE2MHQdZ2Nj2QAfAdBTnmB7daZgbWrBqzFaAB1NU3q/T056f0MP7w0lLAPbSt/r7KfdvHbf4oYHSlUWE27x/u+0BOZ7cotau5IGc2Rsbil8svaXZ29tIccQ9tYwEYsqCCC2CaHYtZmUgmaHp6um/dQd/Enwl+FhICNlc9kIueXGznMpTec0EeBYuTfyXp0ewjbx7z8/O0tLTEFddyH33QN1KAoZOQhQtwm8zEhWcLPvCmpqZocXGRVlZWSNd1rrjGPbSpffFspWZQy3FBBpMhF64mZ2m3sOOXihuweP3fDxSPx933LizQ2dkZBQvuoQ190DcKkD2AYdCgl5AFMDcILsADkOfn53RdWV9f9wENtgBkfDB8OLwDhq9QzlN2f8+VihAWD/qPCHPxodWiWHPfHGVukQGM5QujBM3F0lbBnZubC2XEVQUfAc+oTMaY0GS840IqFBbvpkjb3hxKJqCrwtwvp6c9AUYRJn9tTfYANlga6mzQoLkquL1Y2w/I0GQYPpaKukF6xWUxa3He1WKRiUEBFoM2CAnQVwxfJAAze22TpUEMGpa6bds0bAHIIhcYE2PDhRMWFw9cFqsexTAyIQYtWCAX8oGD0oEihi8SgKGPLafFrphMCpp70yJ6hwoXDitEtLjUddtUmRgWYHgKwRISVfkKnokMYERo9onNvqywV5UGeAvQLXx1VBX8YNva2prvHxEWY2xoMSK+SzKRy7jehKLDdwpgGDcsYQki1CUFAMP8XYCpaVpom/q8LFWMjYgPUlTtumyFcoG9CeiwuGt3UiKQTzg+dbwJqSwUYzUzM8PGAYDjGstf2sTTAODSFiYTCKubPh0u+Ny1YQC+zshdxd7IjRx8X+QVZEIAMTjJME3uR6/VFYB3wCc+Mo9GBrDqpvULcORu2iQDPGigIdobaaDRr0TA8MF1wzVAVSUi2BaVRExEqHydkbvOkPVj5IQxrpHr8LtGaeRUkNVkDz465oH3q0HPWJI94qZJiAzXKrjMr3LTALLcD7ahgNGqm9ZQ3LS8fnM3bSLSlRJoqGFy0J8dZaBx2A00kLqUQOOmCZ9bnXCvNsJD5UHi+3GFyhMBsJrs+fDP36NP9iQTPDaSPXiXpCzVxPuwyZ6JABh1+dWyl658/uK5D+RBkj5gfWi6sm3S6zevv8Xd5YsfS7/+wm5UZ4iEO9rQR024P/7xMUsD/Gx8wG90+95/47dXyxwMAGSVycNsGQHcVqdJ796/i+ocQmiQEewzVoA9kG130xOaPPCmZ1I2Pa3IwA2CF3Y9BnDDARa5ULftAVqvbXvsXPC2Pc5HtM3IZaFXuvJWSIRav//hO9LSGrtw8JNt7+CJoxw8cfieevAkldHoyU9PxnFU6TZJQ2+ApQKst3+8pWK5qByd6lYcnWqb3IY+4wB2Yhl8X0dQiejBPRBf73Tl/8YjNDN/aKmsAAAAAElFTkSuQmCC" />
            </a><br />
            This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
