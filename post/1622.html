<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="author" content="Craig Gidney">
    <meta name="keywords" content="computer science,algorithms,quantum computing,blog">
    <meta name="description" content="Craig Gidney's computer science blog">
    <title>A Resource State won't get you out of Clifford Jail</title>
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <meta name="viewport" content="width=device-width">

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- RSS autodiscovery -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">

    <!-- Analytics -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-48771413-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body>
    <div class="header">
      <a href="/"><img src="/assets/banner.png" alt="Algorithmic Assertions - Craig Gidney's Computer Science Blog" id="site_banner"/></a>
    </div>
    <div class="site">

      <h1 class="post_title">A Resource State won't get you out of Clifford Jail</h1>
<p class="meta">20 Sep 2016</p>

    <!-- MathJax latest -->
    <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [['$','$']],
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        },
        TeX: {
          Macros: {
            ket: ["\\left|{#1}\\right\\rangle", 1],
            bra: ["\\left\\langle{#1}\\right|", 1],
            parens: ["\\left({#1}\\right)", 1],
            bracket: ["\\left[{#1}\\right]", 1],
            brace: ["\\left\\{ {#1} \\right\\}", 1],
            Sum: ["\\underset{#1}{\\overset{#2}{\\Sigma}}", 2],
            bimat: ["\\begin{bmatrix} {#1} & {#2} \\\\ {#3} & {#4} \\end{bmatrix}", 4]
          }
        }
      });
    </script>
    <noscript>
      <font color=red>
        MathJax was blocked.
        Formulas like <strong>$\frac{a}{b}$</strong> won't render into <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAYCAIAAACjjJBEAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFnSURBVDhPY/hPCCBU/P1wamJqZFpBTnJcqLl9142fUHGYip93Znopuc55+Pv/zyv16kJ+W99DJaAq/r3bGiLA67cFJPxuo5eI8bSHf8ASQABR8e1krhSr+ZwnQOGvx9LlFPNPvnv37vs/sBxExc/rrToy8Ye+/P/7ekeKFK/H2guLsvuvQlwCdcefF1sKPX3ic8qaJkzKsTcPSKzY8PQ3RArmUtyAWioYcAOoCvyAyiq+nusIVGdl0O6+/QsqAgYoZnw5nCSlkHfqG5QLAcgqflyuVZeI3PMJyoUCJBV/Hk43YRFySSvIDHXyrNr75i9EGKHi35t1HvxKxUc+/vv/cYe/qNGEu5CIQaj4cjBBSrn03HewYUZsStWXfoDF4Sp+351gKB688yMwOb5c4cwlmngA6h64ir9P59lr5Jz89v/nrQnWsl4LH0MjH8mWvx9OdEUFJ6TEhGXPu/IFkr5AAKECO/j/HwCRTZMPA+AaqQAAAABJRU5ErkJggg==" />.
      </font>
      <br>
      Allow scripts from <strong>algorithmicassertions.com</strong> and <strong>mathjax.org</strong> to fix.
      <hr/>
    </noscript>

<div class="post">
<p>I noticed something interesting, while writing the post about <a href="/post/1620">implementing the QFT using addition into gradients</a>.</p>

<p>Suppose you want to construct a lot of precise power-of-2 phase gates $Z^{2^{-k}}$.
You&#39;re limited to Hadamard gates, controlled-NOTs, a resource state of your choosing, and the half-as-precise-as-what-you-need $Z^{2^{-k+1}}$ gate.
Can you do it?
For some $k$?
For any $k$?</p>

<p>The interesting fact is this: you can succeed at this task for any $k$, <strong>except $k=2$</strong>.
In this post, I discuss why that happens.</p>

<h1>Replacing Square Roots with Controls</h1>

<p>There&#39;s probably some fascinating underlying reason for this, but quantum circuits seem happy to let you trade affecting fewer states against applying a smaller effect to each state.
Square-rooting an operation halves the strength of its effect.
Controlling an operation halves the number of states it affects.
But both increase the &quot;net precision&quot; by a factor of 2, so it&#39;s generally easy to turn one into the other (without using approximations).</p>

<p>Replacing a control with a square root is a standard textbook construction:</p>

<p><img style="max-width:100%; border: 1px solid gray;" src="/assets/2016-09-20-resource-vs-clifford-trap/control-to-root.png"/></p>

<p>With a reusable resource state, we can also go in the opposite direction:</p>

<p><img style="max-width:100%; border: 1px solid gray;" src="/assets/2016-09-20-resource-vs-clifford-trap/root-to-control.png"/></p>

<p><em>(Note: We allow ourselves any gate while making the resource, but we only get to make and use the one copy.
We have to avoid messing it up when we use it, so we can re-use it again and again whenever we need the target gate.
Different gates require different resources.)</em></p>

<p>If you apply the square-root-to-control construction iteratively, you create NOTs with more and more controls.
The process burns itself out once you hit $Z^1$, leaving a triangle of NOTs with more and more and controls acting on a gradient resource:</p>

<p><img style="max-width:100%; border: 1px solid gray;" src="/assets/2016-09-20-resource-vs-clifford-trap/iter-root-to-control.png"/></p>

<p>The triangle of NOTs is equivalent to a controlled decrement gate, which leads naturally into addition/subtraction, and now you know the origin story of the already-mentioned <a href="/post/1620">Fourier-from-addition post</a>.</p>

<p>This &quot;it turns into an increment&quot; thing is the underlying reason we can construct $Z^{2^{-k}}$ gates out of less precise gates when $k&gt;2$.
We can <a href="/circuits/2015/06/12/Constructing-Large-Increment-Gates.html">turn an increment into Toffoli gates</a>, we can turn Toffoli gates into Hadamard, Controlled-NOT, and $Z^{1/4}$ gates, and then we&#39;re done.</p>

<p>For $k=0$ and $k=1$ the construction is trivial, requiring only Controlled-NOT and Hadamard gates (plus the resource):</p>

<p><img style="max-width:100%; border: 1px solid gray;" src="/assets/2016-09-20-resource-vs-clifford-trap/trivial-constructions.png"/></p>

<p>So that just leaves the $k=2$ case.</p>

<p>At first it seems like this case should also be easy, but you quickly realize the catch-22.
This is the first $k$ where our iterated construction creates a doubly-controlled NOT, i.e. Toffoli gates:</p>

<p><img style="max-width:100%; border: 1px solid gray;" src="/assets/2016-09-20-resource-vs-clifford-trap/double-control.png"/></p>

<p>This is a problem because, to make Toffoli gates, we need more than just Hadamards, Controlled-Nots, and $Z^{1/2}$ gates.
We need $Z^{1/4}$ gates to make Toffoli gates, but we need Toffoli gates to make $Z^{1/4}$ gates.
We&#39;re stuck.</p>

<p>There are gates besides the $Z^{1/4}$ gate that would save us, of course.
A particularly elegant one would be the controlled Hadamard gate:</p>

<p><img style="max-width:100%; border: 1px solid gray;" src="/assets/2016-09-20-resource-vs-clifford-trap/controlled-hadamard.png"/></p>

<p>But we don&#39;t have controlled Hadamards, and we can&#39;t make them for the same reason we can&#39;t make a $Z^{1/4}$.</p>

<h1>Stabilizer Circuits</h1>

<p>The reason we can&#39;t make a $Z^{1/4}$ out of $X$, $H$, and $Z^{1/2}$ gates is because those three gates are <a href="https://en.wikipedia.org/wiki/Gottesman%E2%80%93Knill_theorem">Clifford gates</a>, but $Z^{1/4}$ isn&#39;t.</p>

<p>The circuits you can make out of Clifford gates, called stabilizer circuits, can only implement operations from the Clifford group.
Stablizer circuits are <a href="https://arxiv.org/abs/quant-ph/0406196">easy to simulate on a classical computer</a>, but of course that comes with many downsides.
For $n$ qubits, there are infinitely many possible stabilizer circuits... but only $\Theta(8^n)$ possible Clifford operations for them to implement.
That&#39;s exponentially large, but <em>finite</em>.</p>

<p>Contrast $8^n$ with the infinity of operations we can make if we have access to the $Z^{1/4}$ gate (or any other non-Clifford gate).
As soon as we have a non-Clifford gate, we can make a combination of gates that performs a rotation by an irrational fraction of a cycle.
Repeating that one rotation different numbers of times gives you arbitrarily many distinct operations.
Arbitrarily more than $8^n$.</p>

<p>There&#39;s a clear disparity in number-of-achievable-operations here, and throwing a resource state in at the start won&#39;t change anything.
Regardless of what that resource is, we only have a finite number of things we can do to it.
Prefixing a complicated setup step onto every operation in a finite set won&#39;t increase the cardinality of the set.
Therefore we can&#39;t make a $Z^{1/4}$, since that would contradict the number of reachable operations being finite.</p>

<p>The only gotcha to the cardinality-based proof I just gave is measurement.
Measurement is equivalent to CNOT-ing onto a fresh ancilla, but adding a fresh ancilla (even though we can&#39;t operate freely on it) is tantamount to increasing $n$ at will.
So it&#39;s conceivable that there might be some clever resource state, and sequence of measurements, that gives an unbounded set of operations.
After all, <a href="https://arxiv.org/abs/quant-ph/9908010">stabilizer circuits can at least do universal quantum computation when given a <em>stream</em> of resource states</a>.</p>

<p>That being said... I&#39;m just playing devil&#39;s advocate.
For raw stabilizer circuits it&#39;s known that measurement doesn&#39;t add any power, and I seriously doubt that adding a resource state would help.
It would just be <em>way too convenient</em>.
The $Z^{1/4}$ gate is by far the most expensive part of quantum algorithms, to the point where you can often just ignore <em>all the other gates</em> when estimating costs.
If there was such an easy workaround, it would already be known.</p>

<p>I don&#39;t know the trick to proving measurement doesn&#39;t help, but I&#39;m sure that trick exists (and is already known).
Escaping Clifford space with a single resource state?
No way.</p>

</div>

<!-- IntenseDebate comments -->




    </div>

    <table style="width: 100%;">
      <tr>
        <td align="left">
          <a href="/post/1621">&laquo; Java should Autobox Arrays, or maybe not</a>
        </td>
        <td align="right">
          <a href="/post/1623">Post-selection is cheating &raquo;</a>
        </td>
      </tr>
    </table>

    <div class="footer-container">
      <div class="site">
        <div class="footer">
          <div class="contact">
            by: Craig Gidney<br />
            more: <a href="/">All Posts</a>, <a href="/feed.xml">Posts Feed<img src="/assets/feed-icon.png" width="16px" alt="Posts Feed" title="Posts Feed" /></a><br/>
            meta: <a href="/about.html">About the Author/Blog</a><br/>
          </div>
          <div class="license">
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
              <img alt="Creative Commons License" style="border-width:0" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAYAAABjyArgAAAFOklEQVRo3u1aTU8bRxj2OVIs7lw4hhttlR5TpPQHkB+QiH9Q1FskqqCIVIpUCVmuoubQUKm3JrDG5sNfeA1rY3vX9noh5MpP4Ce81fOu32V2WfAHzhoTRhqx3pmdHZ595nk/ZmJEFI/FYnRfR1+J8Kf7Yye/TXvFXcqVslQ8KFDJKNFBtUxG3aAjs0r1Zo0arQZZbZOatkXNTtOttkWWbZLZanAf9K3UDX5WN0o8Vq6U47Hxjkw2TVt7KUrtaLS5vUEbmU9cP6U/0set/+5MVYC+ADev52j/sEjlik5G7ZDBarTqDGDbaVHnxCbnc4eOT4/p5Itbce18drgNfSzb4mfwLMYoV3UeE2MHQdZ2Nj2QAfAdBTnmB7daZgbWrBqzFaAB1NU3q/T056f0MP7w0lLAPbSt/r7KfdvHbf4oYHSlUWE27x/u+0BOZ7cotau5IGc2Rsbil8svaXZ29tIccQ9tYwEYsqCCC2CaHYtZmUgmaHp6um/dQd/Enwl+FhICNlc9kIueXGznMpTec0EeBYuTfyXp0ewjbx7z8/O0tLTEFddyH33QN1KAoZOQhQtwm8zEhWcLPvCmpqZocXGRVlZWSNd1rrjGPbSpffFspWZQy3FBBpMhF64mZ2m3sOOXihuweP3fDxSPx933LizQ2dkZBQvuoQ190DcKkD2AYdCgl5AFMDcILsADkOfn53RdWV9f9wENtgBkfDB8OLwDhq9QzlN2f8+VihAWD/qPCHPxodWiWHPfHGVukQGM5QujBM3F0lbBnZubC2XEVQUfAc+oTMaY0GS840IqFBbvpkjb3hxKJqCrwtwvp6c9AUYRJn9tTfYANlga6mzQoLkquL1Y2w/I0GQYPpaKukF6xWUxa3He1WKRiUEBFoM2CAnQVwxfJAAze22TpUEMGpa6bds0bAHIIhcYE2PDhRMWFw9cFqsexTAyIQYtWCAX8oGD0oEihi8SgKGPLafFrphMCpp70yJ6hwoXDitEtLjUddtUmRgWYHgKwRISVfkKnokMYERo9onNvqywV5UGeAvQLXx1VBX8YNva2prvHxEWY2xoMSK+SzKRy7jehKLDdwpgGDcsYQki1CUFAMP8XYCpaVpom/q8LFWMjYgPUlTtumyFcoG9CeiwuGt3UiKQTzg+dbwJqSwUYzUzM8PGAYDjGstf2sTTAODSFiYTCKubPh0u+Ny1YQC+zshdxd7IjRx8X+QVZEIAMTjJME3uR6/VFYB3wCc+Mo9GBrDqpvULcORu2iQDPGigIdobaaDRr0TA8MF1wzVAVSUi2BaVRExEqHydkbvOkPVj5IQxrpHr8LtGaeRUkNVkDz465oH3q0HPWJI94qZJiAzXKrjMr3LTALLcD7ahgNGqm9ZQ3LS8fnM3bSLSlRJoqGFy0J8dZaBx2A00kLqUQOOmCZ9bnXCvNsJD5UHi+3GFyhMBsJrs+fDP36NP9iQTPDaSPXiXpCzVxPuwyZ6JABh1+dWyl658/uK5D+RBkj5gfWi6sm3S6zevv8Xd5YsfS7/+wm5UZ4iEO9rQR024P/7xMUsD/Gx8wG90+95/47dXyxwMAGSVycNsGQHcVqdJ796/i+ocQmiQEewzVoA9kG130xOaPPCmZ1I2Pa3IwA2CF3Y9BnDDARa5ULftAVqvbXvsXPC2Pc5HtM3IZaFXuvJWSIRav//hO9LSGrtw8JNt7+CJoxw8cfieevAkldHoyU9PxnFU6TZJQ2+ApQKst3+8pWK5qByd6lYcnWqb3IY+4wB2Yhl8X0dQiejBPRBf73Tl/8YjNDN/aKmsAAAAAElFTkSuQmCC" />
            </a><br />
            This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
